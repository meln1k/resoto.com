<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="Resoto by Some Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="Resoto by Some Engineering Atom Feed"><title data-react-helmet="true">Basic Queries | Resoto by Some Engineering</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://resoto.com/docs/reference/cli/query/basic-queries"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="keywords" content="resoto, some engineering, sre, cloud, cloud services, cloud providers, aws, amazon web services, gcp, google cloud platform, azure, docker, kubernetes, k8s, devops, prometheus, infrastructure, resource tool, multicloud, metrics, python, terraform, vsphere, finops, risotto"><meta data-react-helmet="true" property="og:title" content="Basic Queries | Resoto by Some Engineering"><meta data-react-helmet="true" name="description" content="Selecting Nodes by ID"><meta data-react-helmet="true" property="og:description" content="Selecting Nodes by ID"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://resoto.com/docs/reference/cli/query/basic-queries"><link data-react-helmet="true" rel="alternate" href="https://resoto.com/docs/reference/cli/query/basic-queries" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://resoto.com/docs/reference/cli/query/basic-queries" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.255f4ff3.css">
<link rel="preload" href="/assets/js/runtime~main.faf362a7.js" as="script">
<link rel="preload" href="/assets/js/main.975f12a7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-md.svg" alt="Resoto Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo-md.svg" alt="Resoto Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Resoto</b></a><a class="navbar__item navbar__link" href="/about">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/news">News</a><a class="navbar__item navbar__link" href="/support">Support</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/someengineering/resoto" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-icon-link header-github-link" aria-label="GitHub"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.linkedin.com/company/someengineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-icon-link header-linkedin-link" aria-label="LinkedIn"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://twitter.com/someengineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-icon-link header-twitter-link" aria-label="Twitter"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://discord.gg/someengineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-icon-link header-discord-link" aria-label="Discord"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" href="/docs/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" href="/docs/concepts">Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_TwRn" href="/docs/reference">Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/access-permissions">Access Permissions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_TwRn" tabindex="0" href="/docs/reference/cli">Command-Line Interface (CLI)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Command-Line Interface (CLI)&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/cli/tag">tag</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_TwRn" tabindex="0" href="/docs/reference/cli/query">query</a><button aria-label="Toggle the collapsible sidebar category &#x27;query&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/reference/cli/query/basic-queries">Basic Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/cli/query/with-clause">with Clause</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/cli/query/subqueries">Subqueries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/cli/query/aggregation">Aggregation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/cli/query/examples">Examples</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" tabindex="0" href="/docs/reference/resources">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Basic Queries</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="selecting-nodes-by-id">Selecting Nodes by ID<a class="hash-link" href="#selecting-nodes-by-id" title="Direct link to heading">â€‹</a></h2><p>Nodes can be selected by their id via the <code>id(xyz)</code> function. This function can be used globally no matter which section is used.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="selecting-nodes-by-kind">Selecting Nodes by <a href="/docs/concepts/graph/node#kind">Kind</a><a class="hash-link" href="#selecting-nodes-by-kind" title="Direct link to heading">â€‹</a></h2><p>In order to select nodes by a specific type, the query language supports the <code>is(kind)</code> function. The term <code>is(instance)</code> would select the EC2 instance above, but also all other instances, e.g. Google Cloud instances.</p><p>The term <code>is(aws_ec2_instance)</code> would select only EC2 instances from AWS.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="selecting-nodes-by-predicate">Selecting Nodes by Predicate<a class="hash-link" href="#selecting-nodes-by-predicate" title="Direct link to heading">â€‹</a></h2><p>In order to filter for specific attributes of a node, it is possible to define predicates.
A predicate always has the syntax: <code>&lt;property_path&gt; &lt;operation&gt; &lt;value&gt;</code> (e.g. <code>answer!=42</code>).</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="property_path"><code>property_path</code><a class="hash-link" href="#property_path" title="Direct link to heading">â€‹</a></h3><p>The <code>property_path</code> is the path to the property in the JSON structure.</p><p>A nested attribute is accessed via the dot (<code>.</code>). A nested property could be accessed via <code>some.deeply.nested.property</code>.</p><p>Since most of the properties in question are defined in the reported section, the CLI interprets all defined property paths relative to the reported section by default (behaviour can be configured and adjusted). Thus, the path to property <code>reported.name</code> can simply be written as <code>name</code>.</p><p>If all relative paths are interpreted relative to <code>reported</code>, we need a way to target properties not in the reported section. This is possible by using the root syntax via the <code>/</code> (slash).</p><p>A property path that starts with a slash is always interpreted absolute.</p><p>In order to access properties outside of the reported section, use the <code>/</code> syntax:</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Find nodes where reported.cpu_count is greater than 3, and desired.clean is true</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cpu_count</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> and /desired.clean</span><span class="token operator" style="color:#393A34">==</span><span class="token plain">true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The section that is used to interpret the property paths is defined by the environment parameter <code>section</code>. As stated earlier, this variable defaults to <code>reported</code>.</p><p>Since the CLI allows to define environment variables as part of the CLI command, this behaviour can be adjusted easily:</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">section</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">reported query cpu_count</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> and /desired.clean</span><span class="token operator" style="color:#393A34">==</span><span class="token plain">true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>is semantically the same as this query, which interprets all paths from the root</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$&gt; section=/ query reported.cpu_count&gt;3 and desired.clean==true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>is semantically the same as this query, which interprets all paths relative to the desired section</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$&gt; section=desired query /reported.cpu_count&gt;3 and clean==true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The examples above only illustrate the mechanics of property paths. We suggest to keep the default, as the examples below assume the default setting.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="array-elements">Array Elements<a class="hash-link" href="#array-elements" title="Direct link to heading">â€‹</a></h4><p>A property inside an array is accessed via <code>[position]</code>. So to access the first element of an array we can write <code>[0]</code>.</p><p>If the position is not known or does not matter we can write <code>[*]</code>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="operation"><code>operation</code><a class="hash-link" href="#operation" title="Direct link to heading">â€‹</a></h3><p>The <code>operation</code> is one of the following options:</p><table><thead><tr><th>Operation</th><th>Description</th></tr></thead><tbody><tr><td><code>=</code> or <code>==</code></td><td>Property is equal to the provided value.</td></tr><tr><td><code>!=</code></td><td>Property is not equal to the provided value.</td></tr><tr><td><code>&lt;=</code></td><td>Property is less than or equal to the provided value.</td></tr><tr><td><code>&gt;=</code></td><td>Property is greater than or equal to the provided value.</td></tr><tr><td><code>&gt;</code></td><td>Property is greater than the provided value.</td></tr><tr><td><code>&lt;</code></td><td>Property is less than the provided value.</td></tr><tr><td><code>~</code> or <code>=~</code></td><td>Property conforms to the given regexp. Only applicable to strings.</td></tr><tr><td><code>!~</code></td><td>Property is not conform to the given regexp. Only applicable to strings.</td></tr><tr><td><code>in</code></td><td>Property is one of the following values. The value has to be an array.</td></tr><tr><td><code>not in</code></td><td>Property is not one of the following values. The value has to be an array.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="value"><code>value</code><a class="hash-link" href="#value" title="Direct link to heading">â€‹</a></h3><p>The <code>value</code> can be any JSON literal or JSON conform value.</p><p>A JSON conform value is:</p><ul><li>string: Examples: <code>&quot;hello world&quot;</code>, <code>&quot;test&quot;</code>. Note: the query parser is gracious with quotes.
If there are no white space and no special characters, it is possible to omit quotes.
In case you see parse errors, try adding quotes to your strings.</li><li>number: Integers and float numbers can be expressed. Examples: <code>23</code>, <code>12.123</code>.
The model itself clearly defines if a number is <code>int32</code>, <code>int64</code>, <code>float</code> or <code>double</code>.
From the query point of view, all numbers are treated the same way.</li><li>boolean: Examples: <code>true</code>, <code>false</code></li><li>array: Examples: <code>[1, true, &quot;test&quot;]</code></li><li>json object: Examples: <code>{&quot;a&quot;: 1, &quot;b&quot;: 2}</code></li><li>null: <code>null</code>
This can be useful to query for properties that are unset or do not exist.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="arrays">Arrays<a class="hash-link" href="#arrays" title="Direct link to heading">â€‹</a></h3><p>If the filtered property is an array, it is also possible to define a criteria based on elements of the array using one of the operator modifier: <code>all</code>, <code>any</code> or <code>none</code> in front of the operation.</p><p>Let us assume following document: <code>{&quot;reported&quot;: { &quot;test&quot;: [1, 2, 3, 4]}}</code>, we could define a query like <code>test all &gt;= 1</code> or <code>test any &gt; 2</code> or <code>test none &gt; 100</code>, which would match the document.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example predicates</h5></div><div class="admonition-content"><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select nodes with names exactly matching </div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sunset&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Same as previous; parentheses are optional if the string is not a number and does not contain special characters</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> sunset</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select nodes with more than 2 instance_cores</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">instance_cores </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select nodes where the name matches the regular expression sun.*</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">name </span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">~ </span><span class="token variable string" style="color:#e3116c">&quot;sun.*&quot;</span><span class="token variable" style="color:#36acaa">`</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select nodes where the name is either </div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">name </span><span class="token variable keyword" style="color:#00009f">in</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable punctuation" style="color:#393A34">[</span><span class="token variable string" style="color:#e3116c">&quot;sunset&quot;</span><span class="token variable" style="color:#36acaa">, </span><span class="token variable string" style="color:#e3116c">&quot;sunrise&quot;</span><span class="token variable punctuation" style="color:#393A34">]</span><span class="token variable" style="color:#36acaa">`</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="selecting-nodes-by-traversal">Selecting Nodes by Traversal<a class="hash-link" href="#selecting-nodes-by-traversal" title="Direct link to heading">â€‹</a></h2><p><code>&lt;--</code> traverses the graph inbound, <code>--&gt;</code> traverses the graph outbound.</p><p><img alt="Traversal Selectors Diagram" src="/assets/images/graph_query_inout-0793f6123394de2c444b320f823cebfd.png"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="outbound-traversal">Outbound Traversal<a class="hash-link" href="#outbound-traversal" title="Direct link to heading">â€‹</a></h3><p><code>--&gt;</code> traverses the graph outbound to the next level.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select AWS accounts and traverse the graph outbound</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_account</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> --</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This query would return a list of all matching regions.</p><p><img alt="Outbound Traversal Example Query Diagram" src="/assets/images/graph_query_outbound_example-5f51321c68b3d8326017d03783a20dca.png"></p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="inbound-traversal">Inbound Traversal<a class="hash-link" href="#inbound-traversal" title="Direct link to heading">â€‹</a></h3><p><code>&lt;--</code> traverses the graph inbound to the next level.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select AWS EC2 instances, traverse the graph inbound, and filter to only return the aws_regions</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_ec2_instance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">-- is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_region</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img alt="Inbound Traversal Example Query Diagram" src="/assets/images/graph_query_inbound_example-c28a3814b54ecd1497eb1c8ccedf4829.png"></p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="including-the-current-node">Including the Current Node<a class="hash-link" href="#including-the-current-node" title="Direct link to heading">â€‹</a></h3><p><code>-[0:1]-&gt;</code> traverses the graph outbound, starting from the current node <strong>(0)</strong> until the next level <strong>(1)</strong>. The result will contain the current node plus all nodes one level outbound. The same applies for inbound with this statement <code>&lt;-[0:1]-</code>.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Return all resources </div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_region</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> -</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">`</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img alt="Example Query Diagram" src="/assets/images/graph_query_01-c74c8b167cedd9bf935c30e0185b5f13.png"></p></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Return all aws_regions with name global, together with all accounts</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_region</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> and </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">==</span><span class="token plain">global </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">-</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="traversal-by-depth">Traversal by Depth<a class="hash-link" href="#traversal-by-depth" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="range">Range<a class="hash-link" href="#range" title="Direct link to heading">â€‹</a></h4><p><code>-[start:until]-&gt;</code> traverses the graph outbound starting from a user defined depth to a user defined depth.
The graph will be traversed from the current node according to this specification. All matching nodes will be returned.
The same applies for inbound traversals with <code>&lt;-[start:until]-</code>.</p><p><img alt="Traversal by Depth Diagram" src="/assets/images/graph_query_startuntil-8951d8402bc72ca9b11838f9de2d4562.png"></p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><p>The following query answers the question, &quot;Which instance profile is used for ec2 instances connected to an alb target group?&quot;</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select aws_alb_target_groups, traverse 2 levels inbound, and filter for aws_iam_instance_profiles</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_alb_target_groups</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">:2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">- is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_iam_instance_profile</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="one-sided-range">One-Sided Range<a class="hash-link" href="#one-sided-range" title="Direct link to heading">â€‹</a></h4><p><code>-[start:]-&gt;</code> traverses the graph outbound starting from a user defined depth to the leafs of the graph.
The graph will be traversed from the current node according to this specification. All matching nodes will be returned.
The same applies for inbound traversals with <code>&lt;-[start:]-</code>.</p><p>.. admonition:: Example</p><p><code>query is(aws_account) and name==sunshine -[0:]-&gt;</code></p><p>This query will select the aws account with name <code>sunshine</code> and then select all nodes outbound to this node.
This will select everything Resoto knows about nodes in this account.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="bi-directional">Bi-Directional<a class="hash-link" href="#bi-directional" title="Direct link to heading">â€‹</a></h4><p><code>&lt;-[start:until]-&gt;</code> traverses the graph inbound and outbound starting from a user defined depth to a user defined depth.
The graph will be traversed from the current node according to this specification. All matching nodes will be returned.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select nodes with the name sunset connected on any depth to the AWS account</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">query </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;sunset&quot;</span><span class="token plain"> and is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_account</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">-</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="abbreviations">Abbreviations<a class="hash-link" href="#abbreviations" title="Direct link to heading">â€‹</a></h4><p>There are abbreviations for the most common traversal selectors.</p><table><thead><tr><th>Abbreviated Selector</th><th>Unabbreviated Selector</th></tr></thead><tbody><tr><td><code>--&gt;</code></td><td><code>-[1:1]-&gt;</code></td></tr><tr><td><code>&lt;--</code></td><td><code>&lt;-[1:1]-</code></td></tr><tr><td><code>&lt;--&gt;</code></td><td><code>&lt;-[1:1]-&gt;</code></td></tr><tr><td><code>&lt;-[x]-</code></td><td><code>&lt;-[x:x]-</code></td></tr></tbody></table><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Examples</h5></div><div class="admonition-content"><table><thead><tr><th>Abbreviated</th><th>Unabbreviated</th></tr></thead><tbody><tr><td><code>query is(aws_account) --&gt;</code></td><td><code>query is(aws_account) -[1:1]-&gt;</code></td></tr><tr><td><code>query is(aws_region) &lt;--&gt;</code></td><td><code>query is(aws_region) &lt;-[1:1]-&gt;</code></td></tr><tr><td><code>&lt;-[x]-</code></td><td><code>&lt;-[x:x]-</code></td></tr><tr><td><code>query is(aws_region) &lt;-[3]-&gt;</code></td><td><code>query is(aws_region) &lt;-[3:3]-&gt;</code></td></tr></tbody></table></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="traversal-selection-commands">Traversal Selection Commands<a class="hash-link" href="#traversal-selection-commands" title="Direct link to heading">â€‹</a></h4><p>There are also commands doing a traversal selection that you can chain using a pipe.</p><table><thead><tr><th>Command</th><th>Traversal Selector</th></tr></thead><tbody><tr><td><code>predecessors</code></td><td><code>&lt;--</code> or <code>&lt;-[1:1]-</code></td></tr><tr><td><code>successors</code></td><td><code>--&gt;</code> or <code>-[1:1]-&gt;</code></td></tr><tr><td><code>ancestors</code></td><td><code>&lt;-[1:]-</code></td></tr><tr><td><code>descendants</code></td><td><code>-[1:]-&gt;</code></td></tr></tbody></table><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Examples</h5></div><div class="admonition-content"><table><thead><tr><th>Piped Command</th><th>Equivalent Query</th></tr></thead><tbody><tr><td><code>query is(aws_region) <!-- -->|<!-- --> predecessors</code></td><td><code>query is(aws_region) &lt;--</code></td></tr><tr><td><code>query is(aws_region) <!-- -->|<!-- --> successors</code></td><td><code>query is(aws_region) --&gt;</code></td></tr><tr><td><code>query is(aws_region) <!-- -->|<!-- --> ancestors</code></td><td><code>query is(aws_region) &lt;-[1:]-</code></td></tr><tr><td><code>query is(aws_region) <!-- -->|<!-- --> descendants</code></td><td><code>query is(aws_region) -[1:]-&gt;</code></td></tr></tbody></table></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="combining-selections">Combining Selections<a class="hash-link" href="#combining-selections" title="Direct link to heading">â€‹</a></h2><p>All listed selections can be combined with <code>and</code> and <code>or</code> clauses.</p><p>In order to define precedence, simply enclose terms with brackets.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Examples</h5></div><div class="admonition-content"><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select nodes where reported.name is either sunrise or sunset</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">query name </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> sunset or name </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> sunrise</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select aws_ec2_instance nodes where reported.name is sunrise</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_ec2_instance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> and </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">==</span><span class="token plain">sunrise</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">Select aws_ec2_instance nodes of specific type or more than 2 cores</div><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_ec2_instance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> and </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instance_type</span><span class="token operator" style="color:#393A34">==</span><span class="token string" style="color:#e3116c">&quot;m5a.large&quot;</span><span class="token plain"> or instance_cores</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/someengineering/resoto.com/edit/main/docs/reference/cli/query/basic-queries.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-01-23T14:29:04.000Z">1/23/2022</time></b> by <b>TheCatLady</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/reference/cli/query"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">query</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/reference/cli/query/with-clause"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">with Clause</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#selecting-nodes-by-id" class="table-of-contents__link toc-highlight">Selecting Nodes by ID</a></li><li><a href="#selecting-nodes-by-kind" class="table-of-contents__link toc-highlight">Selecting Nodes by Kind</a></li><li><a href="#selecting-nodes-by-predicate" class="table-of-contents__link toc-highlight">Selecting Nodes by Predicate</a><ul><li><a href="#property_path" class="table-of-contents__link toc-highlight"><code>property_path</code></a><ul><li><a href="#array-elements" class="table-of-contents__link toc-highlight">Array Elements</a></li></ul></li><li><a href="#operation" class="table-of-contents__link toc-highlight"><code>operation</code></a></li><li><a href="#value" class="table-of-contents__link toc-highlight"><code>value</code></a></li><li><a href="#arrays" class="table-of-contents__link toc-highlight">Arrays</a></li></ul></li><li><a href="#selecting-nodes-by-traversal" class="table-of-contents__link toc-highlight">Selecting Nodes by Traversal</a><ul><li><a href="#outbound-traversal" class="table-of-contents__link toc-highlight">Outbound Traversal</a></li><li><a href="#inbound-traversal" class="table-of-contents__link toc-highlight">Inbound Traversal</a></li><li><a href="#including-the-current-node" class="table-of-contents__link toc-highlight">Including the Current Node</a></li><li><a href="#traversal-by-depth" class="table-of-contents__link toc-highlight">Traversal by Depth</a><ul><li><a href="#range" class="table-of-contents__link toc-highlight">Range</a></li><li><a href="#one-sided-range" class="table-of-contents__link toc-highlight">One-Sided Range</a></li><li><a href="#bi-directional" class="table-of-contents__link toc-highlight">Bi-Directional</a></li><li><a href="#abbreviations" class="table-of-contents__link toc-highlight">Abbreviations</a></li><li><a href="#traversal-selection-commands" class="table-of-contents__link toc-highlight">Traversal Selection Commands</a></li></ul></li></ul></li><li><a href="#combining-selections" class="table-of-contents__link toc-highlight">Combining Selections</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reference">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/code-of-conduct">Code of Conduct</a></li><li class="footer__item"><a href="https://discord.gg/someengineering" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/someengineering/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">News</a></li><li class="footer__item"><a href="https://github.com/someengineering" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/someengineering" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://some.engineering/privacy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://some.engineering/terms.html" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://some.engineering" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="/img/someengineering.svg" alt="Some Engineering Logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo" width="167" height="121"><img src="/img/someengineering.svg" alt="Some Engineering Logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo" width="167" height="121"></a></div><div class="footer__copyright">Copyright Â© 2022 <a href="https://some.engineering" target="_blank" rel="noopener noreferrer">Some Engineering Inc</a>. Built with <a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer">Docusaurus</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.faf362a7.js"></script>
<script src="/assets/js/main.975f12a7.js"></script>
</body>
</html>