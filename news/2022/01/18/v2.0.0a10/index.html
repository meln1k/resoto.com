<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Resoto by Some Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Resoto by Some Engineering Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="Resoto by Some Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="Resoto by Some Engineering Atom Feed"><title data-react-helmet="true">v2.0.0a10 | Resoto by Some Engineering</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://resoto.com/news/2022/01/18/v2.0.0a10/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" name="keywords" content="resoto, some engineering, sre, cloud, cloud services, cloud providers, aws, amazon web services, gcp, google cloud platform, azure, docker, kubernetes, k8s, devops, prometheus, infrastructure, resource tool, multicloud, metrics, python, terraform, vsphere, finops, risotto"><meta data-react-helmet="true" property="og:title" content="v2.0.0a10 | Resoto by Some Engineering"><meta data-react-helmet="true" name="description" content="This release is exciting since it is the first one featuring our new product name, _Resoto_."><meta data-react-helmet="true" property="og:description" content="This release is exciting since it is the first one featuring our new product name, _Resoto_."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2022-01-18T00:00:00.000Z"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://resoto.com/news/2022/01/18/v2.0.0a10/"><link data-react-helmet="true" rel="alternate" href="https://resoto.com/news/2022/01/18/v2.0.0a10/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://resoto.com/news/2022/01/18/v2.0.0a10/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7f08e742.css">
<link rel="preload" href="/assets/js/runtime~main.df02470c.js" as="script">
<link rel="preload" href="/assets/js/main.8a646238.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP"><span aria-label="star" role="img">‚≠ê</span> If you like Resoto, please <a href="https://github.com/someengineering/resoto" target="_blank" rel="noopener noreferrer">star the project on GitHub</a> and <a href="https://www.linkedin.com/company/someengineering" target="_blank" rel="noopener noreferrer">follow Some Engineering Inc. on LinkedIn</a>. Thanks for your support! <span aria-label="heart" role="img">‚ù§Ô∏è</span></div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/navbar-logo.svg" alt="Resoto Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/navbar-logo.svg" alt="Resoto Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Resoto</b></a><a class="navbar__item navbar__link" href="/about/">About</a><a class="navbar__item navbar__link" href="/docs/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/news/">News</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/support/">Support</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/someengineering/resoto" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-icon-link header-github-link" aria-label="GitHub"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.linkedin.com/company/someengineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-icon-link header-linkedin-link" aria-label="LinkedIn"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://twitter.com/someengineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-icon-link header-twitter-link" aria-label="Twitter"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://discord.gg/someengineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-icon-link header-discord-link" aria-label="Discord"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Announcements</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a aria-current="page" class="sidebarItemLink_zyXk sidebarItemLinkActive_wcJs" href="/news/2022/01/18/v2.0.0a10/">v2.0.0a10</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/news/2021/12/09/v2.0.0a9/">v2.0.0a9</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/news/2021/10/04/v2.0.0a3/">v2.0.0a3</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">v2.0.0a10</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-01-18T00:00:00.000Z" itemprop="datePublished">January 18, 2022</time> ¬∑ <!-- -->5 min read</div></header><div class="markdown" itemprop="articleBody"><p>This release is exciting since it is the first one featuring our new product name, <strong><em>Resoto</em></strong>.</p><p><em>Cloudkeeper</em> is no more, along with all <code>ck</code> naming.</p><p>The components that make up Resoto are now called <a href="/docs/concepts/components/resotocore/">Resoto Core (<code>resotocore</code>)</a>, <a href="/docs/concepts/components/resh/">Resoto Shell (<code>resh</code>)</a>, <a href="/docs/concepts/components/resotoworker/">Resoto Worker (<code>resotoworker</code>)</a>, and <a href="/docs/concepts/components/resotometrics/">Resoto Metrics (<code>resotometrics</code>)</a>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The Docker image name has also changed to <code>somecr.io/someengineering/resoto</code>.</p></div></div><p>Besides the naming change, a lot of features have been implemented. Here is a summary of the most important ones:</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="query-and-cli-interpretation-relative-to-the-reported-section">Query and CLI Interpretation Relative to the Reported Section<a class="hash-link" href="#query-and-cli-interpretation-relative-to-the-reported-section" title="Direct link to heading">‚Äã</a></h2><p>Resoto has the concept of a property path. A deeply nested json object can be navigated by defining a path to it.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><p><code>reported.name</code> means the <code>name</code> property inside the <code>reported</code> object.</p></div></div><p>Until now, we interpreted all paths from the object root. But while this might be the natural approach, we realized that most of the properties to deal with are in the reported section.</p><p>To make query and commands most effective, Resoto will now interpret any path relative to the reported section.</p><p>A property path can be prefixed with a <code>/</code> to mark it as an absolute path. This allows accessing properties not in the reported section.</p><p>The described behavior is used in queries and all other commands you use on the command line.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><p>A volume (e.g. an <a href="https://resoto.com/docs/reference/resources/aws#aws_ec2_volume" target="_blank" rel="noopener noreferrer">aws_ec2_volume</a>) has a <code>name</code> and
<code>volume_size</code> property in the reported section, that can be accessed directly.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">volume</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> and </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">~pvc </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> list name, volume_size</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>An absolute path is now required to access properties not in the reported section.
Assuming we want to query data in the metadata section, the path has to be prefixed with a <code>/</code>.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">volume</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> and /metadata.cleaned</span><span class="token operator" style="color:#393A34">==</span><span class="token plain">false </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> list /metadata.protected</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><p>This new way of path resolution allowed us to remove several CLI commands like <code>reported</code>, <code>desired</code> and <code>metadata</code>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ancestor-merges-are-now-happening-automagically">Ancestor merges are now happening automagically<a class="hash-link" href="#ancestor-merges-are-now-happening-automagically" title="Direct link to heading">‚Äã</a></h2><p>References to ancestors are available in their section <code>/ancestors</code>.</p><p>As with previous versions, id and name of cloud, account, region and zone are added and displayed automatically for every resource. It is now possible to use any other property besides id and name.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">volume</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> and /ancestors.region.metadata.intent</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">test</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="more-powerful-formats">More Powerful Formats<a class="hash-link" href="#more-powerful-formats" title="Direct link to heading">‚Äã</a></h2><p>The <code>format</code> <a href="/docs/reference/cli/">CLI command</a> now understands some predefined formats, which can be enabled via command-line flags.</p><p>The following formats are available out of the box:</p><ul><li><code>--graphml</code> <a href="http://graphml.graphdrawing.org" target="_blank" rel="noopener noreferrer">graphml</a> is a widely used format to export graph data.</li><li><code>--cytoscape</code> <a href="https://js.cytoscape.org" target="_blank" rel="noopener noreferrer">cytoscape</a> vendor specific format.</li><li><code>--dot</code> export the data in <a href="https://graphviz.org" target="_blank" rel="noopener noreferrer">graphviz</a> dot format.</li><li><code>--json</code> creates a JSON string for any node in the system put into a json array.</li><li><code>--ndjson</code> new line delimited JSON, so every node is a one line JSON document.</li><li><code>--text</code> creates a text representation of every node.</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><p>Here, we export the whole graph including all edges to a file named <code>graph.json</code>:</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> query --include-edges is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">graph_root</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> -</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">format</span><span class="token plain"> --json </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">write</span><span class="token plain"> graph.json</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And here, we export a query result in dot format.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> query --include-edges is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aws_ec2_instance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">-</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">- </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">format</span><span class="token plain"> --dot </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">write</span><span class="token plain"> edges.dot</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><p>If you have <a href="https://graphviz.org" target="_blank" rel="noopener noreferrer">Graphviz</a> installed, you can turn this file into a diagram using this command:</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sfdp -Tpng -o edges.png edges.dot</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="improved-jobs-command">Improved Jobs Command<a class="hash-link" href="#improved-jobs-command" title="Direct link to heading">‚Äã</a></h2><p>There is now a single <a href="/docs/reference/cli/">CLI command</a> to create, manipulate and test jobs: <code>jobs</code>.</p><p>Please see the help page of jobs <code>$&gt; help jobs</code> for more details.</p><p>The <code>add_job</code>, <code>delete_job</code>, and <code>tasks</code> commands have been removed as a part of this change.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="http-command"><code>http</code> Command<a class="hash-link" href="#http-command" title="Direct link to heading">‚Äã</a></h2><p>We introduced the <code>http</code> and <code>https</code> <a href="/docs/reference/cli/">CLI commands</a>, which allow you to make REST calls to other systems.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><p>Assume we want to call an internal gatekeeper in case we find compute instances that are tagged with <code>load-test</code> and are older than 24 hours.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> query is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> and tags.intent</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;load-test&quot;</span><span class="token plain"> and age</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">24h </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> chunk </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">format</span><span class="token plain"> --json </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  http gatekeeper/handle_expired</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The results of this query are chunked, every chunk of 100 elements is JSON-formatted and sent to the gatekeeper.</p><p>It would be possible to make this a recurrent task by creating a job.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="query-cost-analysis">Query Cost Analysis<a class="hash-link" href="#query-cost-analysis" title="Direct link to heading">‚Äã</a></h2><p>Writing queries can be a complex task.</p><p>To give some guidance related to query runtime performance, we introduced the option to analyze a query.</p><p>The <a href="/docs/reference/cli/query/"><code>query</code> command</a> now has an <code>--explain</code> flag, that gives insights into the query performance.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example</h5></div><div class="admonition-content"><p>We use the previous query as example to show a possible result. (Please note that the runtime characteristics are highly dependent on the underlying graph data.)</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> query --explain is</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> and tags.intent</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;load-test&quot;</span><span class="token plain"> and age</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">24h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">available_nr_items: </span><span class="token number" style="color:#36acaa">142670</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">estimated_cost: </span><span class="token number" style="color:#36acaa">4891</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">estimated_nr_items: </span><span class="token number" style="color:#36acaa">4641</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">full_collection_scan: </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rating: simple</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><p>The final rating is the most interesting one, where Resoto defines a query as simple, complex or bad. A query that is considered simple should be fast and resource friendly.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="other-improvements">Other improvements<a class="hash-link" href="#other-improvements" title="Direct link to heading">‚Äã</a></h2><ul><li>Resoto is now using <a href="https://app.codecov.io/gh/someengineering/resoto" target="_blank" rel="noopener noreferrer">Codecov</a> for coverage reports.</li><li>This release ships with APIs and functionality to enable a TLS-secured setup. This is still work in progress so all communication is still plain HTTP. We will have a complete secure setup when the final 2.0 release is shipped.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/news/2021/12/09/v2.0.0a9/"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">v2.0.0a9<!-- --> ¬ª</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#query-and-cli-interpretation-relative-to-the-reported-section" class="table-of-contents__link toc-highlight">Query and CLI Interpretation Relative to the Reported Section</a></li><li><a href="#ancestor-merges-are-now-happening-automagically" class="table-of-contents__link toc-highlight">Ancestor merges are now happening automagically</a></li><li><a href="#more-powerful-formats" class="table-of-contents__link toc-highlight">More Powerful Formats</a></li><li><a href="#improved-jobs-command" class="table-of-contents__link toc-highlight">Improved Jobs Command</a></li><li><a href="#http-command" class="table-of-contents__link toc-highlight"><code>http</code> Command</a></li><li><a href="#query-cost-analysis" class="table-of-contents__link toc-highlight">Query Cost Analysis</a></li><li><a href="#other-improvements" class="table-of-contents__link toc-highlight">Other improvements</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reference/">Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contributing/">Contributing</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/code-of-conduct/">Code of Conduct</a></li><li class="footer__item"><a href="https://discord.gg/someengineering" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/someengineering/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news/">News</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/someengineering" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/someengineering" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/privacy/">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" href="/terms/">Terms and Conditions</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://some.engineering" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="/img/someengineering.svg" alt="Some Engineering Logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo" width="167" height="121"><img src="/img/someengineering.svg" alt="Some Engineering Logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo" width="167" height="121"></a></div><div class="footer__copyright"><span aria-label="owl" role="img">ü¶â</span> Copyright ¬© 2022 <a href="https://some.engineering" target="_blank" rel="noopener noreferrer">Some Engineering Inc</a>. Built with <a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer">Docusaurus</a>. <span aria-label="dinosaur" role="img">ü¶ñ</span></div></div></div></footer></div>
<script src="/assets/js/runtime~main.df02470c.js"></script>
<script src="/assets/js/main.8a646238.js"></script>
</body>
</html>