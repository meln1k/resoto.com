"use strict";(self.webpackChunkresoto_com=self.webpackChunkresoto_com||[]).push([[9121],{4137:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return h}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(n),h=r,m=d["".concat(s,".").concat(h)]||d[h]||u[h]||a;return n?o.createElement(m,i(i({ref:t},l),{},{components:n})):o.createElement(m,i({ref:t},l))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5761:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return l},default:function(){return d}});var o=n(7462),r=n(3366),a=(n(7294),n(4137)),i=["components"],c={slug:"core",sidebar_position:1},s="Resoto Core",p={unversionedId:"concepts/components/core",id:"concepts/components/core",title:"Resoto Core",description:"The Resoto Core graph platform (resotocore) is the persistence and query backend of Resoto. It maintains the graph of resources and provides APIs to update and access them.",source:"@site/docs/concepts/components/core.md",sourceDirName:"concepts/components",slug:"/concepts/components/core",permalink:"/docs/concepts/components/core",editUrl:"https://github.com/someengineering/resoto.com/edit/main/docs/concepts/components/core.md",tags:[],version:"current",lastUpdatedBy:"TheCatLady",lastUpdatedAt:1643425118,formattedLastUpdatedAt:"1/29/2022",sidebarPosition:1,frontMatter:{slug:"core",sidebar_position:1},sidebar:"sidebar",previous:{title:"Components",permalink:"/docs/concepts/components/"},next:{title:"Resoto Worker",permalink:"/docs/concepts/components/worker"}},l=[{value:"API",id:"api",children:[{value:"Evaluate",id:"evaluate",children:[],level:3}],level:2},{value:"Execute",id:"execute",children:[],level:2}],u={toc:l};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"resoto-core"},"Resoto Core"),(0,a.kt)("p",null,"The Resoto Core graph platform (",(0,a.kt)("inlineCode",{parentName:"p"},"resotocore"),") is the persistence and query backend of Resoto. It maintains the graph of resources and provides APIs to update and access them."),(0,a.kt)("p",null,"Within Resoto Core, there are workflows consisting of steps that result in actions like ",(0,a.kt)("inlineCode",{parentName:"p"},"collect"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"cleanup")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"generate_metrics"),". These actions are received by components like ",(0,a.kt)("a",{parentName:"p",href:"/docs/concepts/components/worker"},"Resoto Worker")," and ",(0,a.kt)("a",{parentName:"p",href:"/docs/concepts/components/metrics"},"Resoto Metrics"),"."),(0,a.kt)("h2",{id:"api"},"API"),(0,a.kt)("p",null,"The Resoto Core API is exposed at ",(0,a.kt)("inlineCode",{parentName:"p"},"http://<resoto-address>:8900/api-doc"),". You can also access it at ",(0,a.kt)("a",{parentName:"p",href:"pathname:///docs/reference/core-api"},(0,a.kt)("inlineCode",{parentName:"a"},"https://resoto.com/docs/reference/core-api")),"."),(0,a.kt)("p",null,"Resoto Core has two API endpoints to connect to for CLI purposes:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"/cli/evaluate")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"/cli/execute"))),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"cli/evaluate")," functinality is used internally on every ",(0,a.kt)("inlineCode",{parentName:"p"},"/cli/execute")," before the command executes."),(0,a.kt)("p",null,"Below is a simulation of sending a ",(0,a.kt)("a",{parentName:"p",href:"/docs/concepts/components/shell"},"Resoto Shell")," query to the CLI API."),(0,a.kt)("p",null,"We will evaluate the query before executing it for demonstration. We also introduce this query with a typo to show the response if not successful."),(0,a.kt)("h3",{id:"evaluate"},"Evaluate"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Correct"',title:'"Correct"'},'$> echo \'query is("resource") limit 1\' | http :8900/cli/evaluate\n// highlight-start\nHTTP/1.1 200 OK\nContent-Length: 47\nContent-Type: application/json; charset=utf-8\nDate: Wed, 06 Oct 2021 15:13:08 GMT\nServer: Python/3.9 aiohttp/3.7.4.post0\n\n[\n    {\n        "execute_query": "is(\\"resource\\") limit 1"\n    }\n]\n// highlight-end\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Typo"',title:'"Typo"'},"$> echo 'graph=resoto query is(\"resource\") limit1' | http :8900/cli/evaluate\n// highlight-start\nHTTP/1.1 400 Bad Request\nContent-Length: 151\nContent-Type: text/plain; charset=utf-8\nDate: Wed, 06 Oct 2021 15:13:33 GMT\nServer: Python/3.9 aiohttp/3.7.4.post0\n\nError: ParseError\nMessage: expected one of '!=', '!~', '<', '<=', '=', '==', '=~', '>', '>=', '[A-Za-z][A-Za-z0-9_]*', '`', 'in', 'not in', '~' at 0:21\n// highlight-end\n")),(0,a.kt)("h2",{id:"execute"},"Execute"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Correct"',title:'"Correct"'},'$> echo \'graph=resoto query is("resource") limit 1\' | http :8900/cli/execute\n// highlight-start\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Wed, 06 Oct 2021 15:08:10 GMT\nServer: Python/3.9 aiohttp/3.7.4.post0\nTransfer-Encoding: chunked\n\n[\n    {\n        "id": "06ee67f7c54124c019b80a7f53fa59b231b374fe61f94b91e0c26729440d095c",\n        "kinds": [\n            "base_cloud",\n            "cloud",\n            "resource"\n        ],\n        "metadata": {\n            "python_type": "resoto.baseresources.Cloud"\n        },\n        "reported": {\n            "ctime": "2021-09-25T23:49:38Z",\n            "id": "gcp",\n            "kind": "cloud",\n            "name": "gcp",\n            "tags": {}\n        },\n        "revision": "_d_7eKMa---",\n        "type": "node"\n    }\n]\n// highlight-end\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Typo"',title:'"Typo"'},"$> echo 'graph=resoto query is(\"resource\") limit1' | http :8900/cli/execute\n// highlight-start\nHTTP/1.1 400 Bad Request\nContent-Length: 151\nContent-Type: text/plain; charset=utf-8\nDate: Wed, 06 Oct 2021 15:26:54 GMT\nServer: Python/3.9 aiohttp/3.7.4.post0\n\nError: ParseError\nMessage: expected one of '!=', '!~', '<', '<=', '=', '==', '=~', '>', '>=', '[A-Za-z][A-Za-z0-9_]*', '`', 'in', 'not in', '~' at 0:21\n// highlight-end\n")),(0,a.kt)("h1",{id:"more-api-endpoints"},"More API Endpoints"),(0,a.kt)("p",null,"Resoto Core is the central hub for everything Resoto does. You can explore additional API endpoints at ",(0,a.kt)("inlineCode",{parentName:"p"},"http://<resoto-address>:8900/")," or ",(0,a.kt)("a",{parentName:"p",href:"pathname:///docs/reference/core-api"},(0,a.kt)("inlineCode",{parentName:"a"},"https://resoto.com/docs/reference/core-api")),"."))}d.isMDXComponent=!0}}]);